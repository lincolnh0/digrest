function ready(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function add_event_listeners_to_form(){document.getElementById("btn-submit").addEventListener("click",submitForm);const e=document.getElementById("protocol-switch");e.addEventListener("click",toggleProtocol),e.addEventListener("click",updateFullUrl);const t=document.getElementById("btn-parameter-add-row");t.addEventListener("click",addRowToTable),t.tableId="table-parameters";const n=document.getElementById("btn-header-add-row");n.addEventListener("click",addRowToTable),n.tableId="table-header";const d=document.getElementById("btn-parameter-clear-table");d.addEventListener("click",clearTable),d.tableId="table-parameters";const a=document.getElementById("btn-header-clear-table");a.addEventListener("click",clearTable),a.tableId="table-header";document.getElementById("btn-copy").addEventListener("click",copyOutput);document.getElementById("btn-convert").addEventListener("click",toggleOutputFormat);document.getElementById("textbox-url").addEventListener("keyup",updateFullUrl);[{currentTarget:{tableId:"table-parameters"}},{currentTarget:{tableId:"table-header"}}].forEach((e=>{addRowToTable(e)})),updateFullUrl()}function submitForm(e){const t=document.getElementById("select-request"),n=document.getElementById("textbox-full-url");e.preventDefault(),http_request(n.value,t.value)}function toggleProtocol(){const e=document.getElementById("protocol-switch");e.innerText="http://"==e.innerText?"https://":"http://"}function toggleOutputFormat(e){const t=e.currentTarget,n=document.getElementById("textarea-response");"yaml"==t.dataset.format?n.value=window.digrest.yamlDump(responseObj):n.value=JSON.stringify(responseObj,null,4),t.dataset.format="yaml"==t.dataset.format?"json":"yaml",t.innerText="Convert to "+t.dataset.format.toUpperCase()}function copyOutput(e){const t=e.currentTarget,n=t.firstChild,d=document.getElementById("textarea-response");navigator.clipboard.writeText(d.value),n.classList.add("fa-clipboard-check"),n.classList.remove("fa-clipboard");const a=document.createTextNode("Copied");t.removeChild(t.lastChild),t.appendChild(a),setTimeout((()=>{const e=document.getElementById("btn-copy"),t=e.firstChild,n=document.createTextNode("Copy");e.removeChild(e.lastChild),e.appendChild(n),t.classList.remove("fa-clipboard-check"),t.classList.add("fa-clipboard")}),3e3)}function clearTable(e){if(null!=e){const t=document.getElementById(e.currentTarget.tableId).getElementsByTagName("tbody")[0];for(;t.childElementCount>0;)t.removeChild(t.lastChild);addRowToTable(e)}}function addRowToTable(e){if(null!=e){const t=document.getElementById(e.currentTarget.tableId).getElementsByTagName("tbody")[0],n=t.childElementCount,d=e.currentTarget.tableId.replace("table-","");let a=document.createElement("tr"),l=document.createElement("td"),o=document.createElement("input");o.type="checkbox",o.checked=!0,o.classList.add("form-control-sm"),o.id="checkbox-active-"+d+"-"+n,l.appendChild(o),a.appendChild(l);let r=document.createElement("td");r.id=d+"-key-"+n,r.contentEditable="plaintext-only",r.addEventListener("keyup",updateFullUrl),a.appendChild(r);let c=document.createElement("td");c.id=d+"-value-"+n,c.contentEditable="plaintext-only",c.addEventListener("keyup",updateFullUrl),a.appendChild(c);let m=document.createElement("td");m.id=d+"-description-"+n,m.contentEditable="plaintext-only",a.appendChild(m),t.appendChild(a)}}function updateFullUrl(){const e=document.getElementById("textbox-url"),t=document.getElementById("textbox-full-url"),n=document.getElementById("table-parameters").getElementsByTagName("tbody")[0],d=document.getElementById("protocol-switch");if(t.value=d.innerText+e.value,n.firstChild&&""!=document.getElementById("parameters-key-0").innerText){t.value+="?";for(let[e,d]of n.childNodes.entries())document.getElementById("checkbox-active-parameters-"+e).checked&&(t.value+=document.getElementById("parameters-key-"+e).innerText,""!=document.getElementById("parameters-value-"+e).innerText&&(t.value+="="+document.getElementById("parameters-value-"+e).innerText),d!=n.lastChild&&(t.value+="&"))}}async function http_request(e,t){const n=document.getElementById("textarea-response"),d=constructHeaderObject();try{const a={method:t};null!=d&&(a.headers=d);const l=await fetch(e,a);responseObj=await l.json(),n.value=JSON.stringify(responseObj,null,4)}catch(e){n.value=e}document.querySelectorAll('a[href="#response-pane"]')[0].click();const a=document.getElementById("btn-convert");a.dataset.format="yaml",a.innerText="Convert to YAML"}function constructHeaderObject(){const e=document.getElementById("table-header").getElementsByTagName("tbody")[0];if(e.firstChild&&""!=document.getElementById("header-key-0").innerText){let t={};for(let[n,d]of e.childNodes.entries())if(document.getElementById("checkbox-active-header-"+n).checked){const e=document.getElementById("header-key-"+n).innerText,d=document.getElementById("header-value-"+n).innerText;t[e]=d}return t}}let responseObj;ready(add_event_listeners_to_form);